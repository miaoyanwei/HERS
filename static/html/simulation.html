<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Estimates</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="" />
    <meta name="author" content="Miao" />

    <link rel="icon" type="image/x-icon" href="../assets/favicon.ico" />
    
    <!-- Bootstrap CSS-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
        
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/simulation.css" />
    
    <!-- JQuery-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>

    <!-- Highcharts-->
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/series-label.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
</head>

<body>

    <div id="darknav-placeholder"></div>

    <main>

        <h1 id="pageTitle">Estimates of your home energy use</h1>

        <!-- Cards-->
        <div class="container">
            <div class="row g-5">

                <!-- Current-->
                <div class="col-md-6">
                    <div class="card h-100" id="cur">

                        <div class="card-body">

                            <h2 class="card-title" id="cardTitle">Current</h2>

                            <div class="card-content">

                                <!-- tab
                                <div class="tab">
                                    <button class="tablinks" onclick="openTab(event, 'currentDay')">Day</button>
                                    <button class="tablinks active" onclick="openTab(event, 'currentYear')" id="defaultOpen1">Year</button>
                                </div>-->
                                
                                <!-- Graph day
                                <div id="currentDay" class="tabcontent">
                                    <div id="chart_current_day" style="height: 200px;"></div>
                                </div>-->
                                
                                <!-- Graph year-->
                                <div id="currentYear" class="tabcontent" style="display: block;">
                                    <div id="chart_current_year" style="height: 200px;"></div> 
                                </div>

                                <!-- Total energy-->
                                <div class="total">

                                    <div class="totalDemand">
                                        <p>Energy demand</p>
                                        <p><span id="totalDemand-placeholder"></span> kWh</p>
                                    </div>
                                    <div class="legend">
                                        <div class="foo heating"></div><small style="margin-right: 8px;">Heating</small>
                                        <div class="foo cooling"></div><small style="margin-right: 8px;">Cooling</small>
                                        <div class="foo appliance"></div><small style="margin-right: 8px;">Appliance</small>
                                        <div class="foo hotwater"></div><small style="margin-right: 8px;">Hot water</small>
                                    </div>
                                    <small id="curNotHP" style="color: #A78067;"><i class="bi bi-exclamation-circle-fill"></i>Heating energy not included in the chart</small>

                                    <hr>

                                    <div class="totalSupply">
                                        <p>PV generation</p>
                                        <p><span id="totalSupply-placeholder"></span> kWh</p>
                                    </div>
                                    <div class="legend">
                                        <div class="foo pv"></div><small style="margin-right: 8px;">PV</small>
                                    </div>

                                    <hr>

                                </div>

                                <!-- Configuration-->
                                <h3 id="subtitle" style="margin-bottom: 24px;">Current Energy System</h3>
                                <div class="config">
                                    <i class="bi bi-check2" id="pv-true"></i><i class="bi bi-x" id="pv-false"></i>PV system <span id="currentPVSize"></span><br><hr>
                                    <i class="bi bi-check2" id="battery-true"></i><i class="bi bi-x" id="battery-false"></i>Battery system <span id="currentBatteryCapacity"></span><br><hr>
                                    <i class="bi bi-check2" id="sems-true"></i><i class="bi bi-x" id="sems-false"></i>SEMS system<br><hr>
                                    <i class="bi bi-check2" id="boiler-true"></i><i class="bi bi-x" id="boiler-false"></i>Heating system <span id="currentBoilerType"></span><br><hr>
                                    <i class="bi bi-check2" id="renovation-true"></i><i class="bi bi-x" id="renovation-false"></i>Building renovation<br><hr>
                                </div>
                            
                            </div>

                        </div>

                        <!-- Total cost-->
                        <div class="card-footer totalCost" style="background-color: #f9f9f9;">
                            <div class="totalDisplay" style="margin-bottom: 20px;">
                                <h2>Energy Bill</h2>
                                <h2>&#8364;<span id="totalcost-placeholder"></span></h2>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- Simulated-->
                <div class="col-md-6">
                    <div class="card h-100" id="simu">

                        <div class="card-body">

                            <h2 class="card-title" id="cardTitle" style="color: #345A46">Simulate</h2>

                            <div class="card-content">

                            <!-- tab
                            <div class="tab">
                                <button class="tablinks" onclick="openTab(event, 'simuDay')">Day</button>
                                <button class="tablinks active" onclick="openTab(event, 'simuYear')" id="defaultOpen2">Year</button>
                            </div>-->

                            <!-- graph day
                            <div id="simuDay" class="tabcontent">
                                <div id="chart_simu_day" style="height: 200px;"></div>
                            </div>-->
                            
                            <!-- Graph year-->

                                <div id="simuYear" class="tabcontent" style="display: block;">
                                    <div id="chart_simu_year" style="height: 200px;"></div> 
                                </div>

                                <!-- Total energy-->

                                <div class="total">

                                    <div class="totalDemand">
                                        <p>Energy demand</p>
                                        <p><span id="totalSimuDemand-placeholder"></span> kWh</p>
                                    </div>
                                    <div class="legend">
                                        <div class="foo heating"></div><small style="margin-right: 8px;">Heating</small>
                                        <div class="foo cooling"></div><small style="margin-right: 8px;">Cooling</small>
                                        <div class="foo appliance"></div><small style="margin-right: 8px;">Appliance</small>
                                        <div class="foo hotwater"></div><small style="margin-right: 8px;">Hot water</small>
                                    </div>
                                    <small id="simuNotHP" style="color: #A78067;"><i class="bi bi-exclamation-circle-fill"></i>Heating energy not included in the chart</small>

                                    <hr>

                                    <div class="totalSupply">
                                        <p>PV generation</p>
                                        <p><span id="totalSimuSupply-placeholder"></span> kWh</p>
                                    </div>
                                    <div class="legend">
                                        <div class="foo pv"></div><p style="font-size: smaller; margin-right: 8px;">PV</p>
                                    </div>

                                    <hr>

                                </div>

                                <!-- Configuraion-->

                                <h3 id="subtitle">Simulated Energy System</h3>
                                
                                <div class="accordion accordion-flush">

                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="flush-headingPV">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="true" id="pv_exist">
                                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsePV" aria-expanded="false" aria-controls="flush-collapse">
                                                    PV system
                                                </button>
                                            </div>
                                        </h2>
                                        <div id="flush-collapsePV" class="accordion-collapse collapse" aria-labelledby="flush-heading" data-bs-parent="#accordionFlushExample">
                                            <div class="accordion-body">
                                                A PV system can convert sunlight directly into electricity.<br>
                                                <select class="form-select" id="pv_size">
                                                    <option value=" "> </option>
                                                    <option value="5">around 5 kilowatt-peak</option>
                                                    <option value="10">around 10 kilowatt-peak</option>
                                                </select>
                                                <br><small>The annualised cost of a <span id="sizePV"></span> kilowatt-peak PV system is approx. &#8364;<span id="annucostPV"></span></small>.
                                            </div>
                                        </div>
                                    </div>

                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="flush-headingBattery">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="true" id="battery_exist">
                                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseBattery" aria-expanded="false" aria-controls="flush-collapse">
                                                    Battery system
                                                </button>
                                            </div>
                                        </h2>
                                        <div id="flush-collapseBattery" class="accordion-collapse collapse" aria-labelledby="flush-heading" data-bs-parent="#accordionFlushExample">
                                            <div class="accordion-body">
                                                A battery system can store excess energy generated by solar panels or other renewable sources of energy during the day. <br>
                                                <select class="form-select" id="battery_capacity">
                                                    <option value=" "> </option>
                                                    <option value="10">around 10 kilowatt-hours</option>
                                                    <option value="20">around 20 kilowatt-hours</option>
                                                </select>
                                                <br>The stored energy can be used at night or during times when there is no sun or wind. In the event of a power outage, a home battery system can also provide backup power to keep essential appliances running. 
                                                <br><small>The annualised cost of a <span id="capBattery"></span> kilowatt-hours battery system is approx. &#8364;<span id="annucostBattery"></span></small>.
                                            </div>
                                        </div>
                                    </div>

                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="flush-headingSEMS">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="true" id="sems_exist">
                                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseSEMS" aria-expanded="false" aria-controls="flush-collapseSEMS">
                                                    SEMS system
                                                </button>
                                            </div>
                                        </h2>
                                        <div id="flush-collapseSEMS" class="accordion-collapse collapse" aria-labelledby="flush-headingSEMS" data-bs-parent="#accordionFlushExample">
                                            <div class="accordion-body">A Smart Energy Management System (SEMS) can optimise energy usage by adjusting heating and cooling systems, lighting, and other energy-consuming devices to minimise energy waste; and turning off or reducing energy usage during periods of low occupancy or when energy prices are high. 
                                                <br><small>The annualised cost of a SEMS system is approx. &#8364;96.</small>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="flush-headingHS">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="true" id="boiler_exist" checked disabled>
                                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseHS" aria-expanded="false" aria-controls="flush-collapseHS">
                                                    Heating system
                                                </button>
                                            </div>
                                        </h2>
                                        <div id="flush-collapseHS" class="accordion-collapse collapse" aria-labelledby="flush-headingHS" data-bs-parent="#accordionFlushExample">
                                            <div class="accordion-body">
                                                The technology that is used to generate heat in order to warm a space or provide hot water. <br>
                                                <select class="form-select" id="boiler_type">
                                                    <option value="solids">Biomass boiler</option>
                                                    <option value="district_heating">District heating</option>
                                                    <option value="Air_HP">Heat pump</option>
                                                    <option value="liquids">Heating oil boiler</option>
                                                    <option value="gases">Natural gas boiler</option>
                                                </select>
                                                <br><small>The annualised cost of a heat pump is approx. &#8364;900.</small>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="flush-headingRenovation">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="true" id="building_renovation">
                                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseRenovation" aria-expanded="false" aria-controls="flush-collapseRenovation">
                                                    Building renovation
                                                </button>
                                            </div>
                                        </h2>
                                        <div id="flush-collapseRenovation" class="accordion-collapse collapse" aria-labelledby="flush-headingRenovation" data-bs-parent="#accordionFlushExample">
                                            <div class="accordion-body">
                                                If your house has not been renovated for a long time, we would recommend you to renovate your roof, windows, walls and basement. 
                                                Building renovation can have a significant impact on improving home energy efficiency performance by reducing the amount of energy needed to heat, cool, and operate a home.
                                                <br><small>The annualised cost of renovating the whole house is approx. &#8364;2000.</small>
                                            </div>
                                        </div>
                                    </div>

                                </div>

                            </div>
                        
                        </div>

                        <!-- Total cost-->

                        <div class="card-footer totalCost" style="background-color: #fff;">
                            <div class="d-grid mx-auto">
                                <button class="btn btn-outline-dark" onclick="retrieveNewSurvey()">Update</button>
                            </div>
                            <div class="totalDisplay">
                                <h2 style="margin-bottom:4px;">Energy Bill</h2>
                                <h2 style="margin-bottom:4px;">&#8364;<span id="totalSimuCost-placeholder"></span></h2>
                            </div>
                            <small style="margin-bottom: 0; color: #345A46;">The annualised investment cost is approx. &#8364;<span id="investmentSimuCost-placeholder"></span></small>
                        </div>

                    </div>
                </div>

            </div>

        </div>

        <!-- educate-->
        <div class="container">
            <a href="edu.html">
                <div class="edu">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 19.9336C11.0386 19.9336 10.1329 19.7767 9.2831 19.4628C8.43325 19.1489 7.66111 18.7086 6.96667 18.1419L5.46665 19.6169C5.30555 19.778 5.11389 19.8586 4.89168 19.8586C4.66944 19.8586 4.47778 19.778 4.31668 19.6169C4.15556 19.4558 4.075 19.2642 4.075 19.0419C4.075 18.8197 4.15556 18.628 4.31668 18.4669L5.79168 16.9753C5.22119 16.279 4.77996 15.5063 4.46797 14.6572C4.15599 13.8081 4 12.9003 4 11.9336C4 9.70026 4.775 7.80859 6.325 6.25859C7.875 4.70859 9.76667 3.93359 12 3.93359H20V11.9336C20 14.1669 19.225 16.0586 17.675 17.6086C16.125 19.1586 14.2333 19.9336 12 19.9336ZM12 18.2669C13.7593 18.2669 15.2546 17.6512 16.4861 16.4197C17.7176 15.1882 18.3333 13.6929 18.3333 11.9336V5.60027H12C10.2407 5.60027 8.74536 6.21601 7.51387 7.44749C6.28239 8.67898 5.66665 10.1743 5.66665 11.9336C5.66665 12.6584 5.78332 13.3508 6.01665 14.0106C6.24998 14.6704 6.56943 15.2642 6.975 15.7919L12.3167 10.4669C12.4778 10.3058 12.6694 10.2253 12.8917 10.2253C13.1139 10.2253 13.3055 10.3058 13.4667 10.4669C13.6333 10.6314 13.7167 10.8267 13.7167 11.0528C13.7167 11.2789 13.6333 11.4753 13.4667 11.6419L8.14165 16.9669C8.66943 17.3725 9.26322 17.6906 9.92302 17.9211C10.5828 18.1517 11.2751 18.2669 12 18.2669Z" fill="white"/>
                    </svg>
                    <p><span style="font-weight: bold;">Why should we turn to renewable energy?</span> Learn more about the reasons other than cost-savings.</p>
                </div>
            </a>
        </div>

    </main>

    <div id="darkfooter-placeholder"></div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js" integrity="sha384-fbbOQedDUMZZ5KreZpsbe1LCZPVmfTnH7ois6mU1QK+m14rQ1l2bGBq41eYeM/fS" crossorigin="anonymous"></script>

    <script type="module">
        import { initChart, updateData, retrieveNewSurvey } from '../js/simulation.js';
        initChart();
        updateData();
        window.retrieveNewSurvey = retrieveNewSurvey
    </script>
    
    <script src="../js/navbar.js"></script>


    <!--
    <script>
    // Function to be called when the HTML page is fully loaded
    window.onload = function() {
        // Get the element with id="defaultOpen" and click on it
        document.getElementById("defaultOpen1", "defaultOpen2").click();
    }
    </script>
    -->

</body>
</html>
